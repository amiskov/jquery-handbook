<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Основы jQuery | 5 Bringing pages to life with jQuery</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/jquery-handbook/assets/css/10.styles.27f07c85.css" as="style"><link rel="preload" href="/jquery-handbook/assets/js/app.c2cea729.js" as="script"><link rel="preload" href="/jquery-handbook/assets/js/4.dca42521.js" as="script"><link rel="prefetch" href="/jquery-handbook/assets/js/5.538054b4.js"><link rel="prefetch" href="/jquery-handbook/assets/js/0.10c57b0b.js"><link rel="prefetch" href="/jquery-handbook/assets/js/1.b1313eb9.js"><link rel="prefetch" href="/jquery-handbook/assets/js/2.24c05937.js"><link rel="prefetch" href="/jquery-handbook/assets/js/3.b1b10936.js"><link rel="prefetch" href="/jquery-handbook/assets/js/6.19b687bd.js"><link rel="prefetch" href="/jquery-handbook/assets/js/7.8f8aa961.js"><link rel="prefetch" href="/jquery-handbook/assets/js/8.dc86523a.js"><link rel="prefetch" href="/jquery-handbook/assets/js/9.1bb06ecd.js">
    <link rel="stylesheet" href="/jquery-handbook/assets/css/10.styles.27f07c85.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/jquery-handbook/" class="home-link router-link-active"><!----><span class="site-name">
      Основы jQuery
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>DOM</span><!----></p><ul class="sidebar-group-items"><li><a href="/jquery-handbook/ch01/" class="sidebar-link">1. Introducing jQuery</a></li><li><a href="/jquery-handbook/ch02/" class="sidebar-link">2. Selecting elements</a></li><li><a href="/jquery-handbook/ch03/" class="sidebar-link">3. Operating on a jQuery collection</a></li><li><a href="/jquery-handbook/ch04/" class="sidebar-link">4. Working with properties, attributes, and data</a></li><li><a href="/jquery-handbook/ch05/" class="active sidebar-link">5 Bringing pages to life with jQuery</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jquery-handbook/ch05/#_5-1-changing-element-styling" class="sidebar-link">5.1 Changing element styling</a></li><li class="sidebar-sub-header"><a href="/jquery-handbook/ch05/#_5-2-setting-element-content" class="sidebar-link">5.2 Setting element content</a></li><li class="sidebar-sub-header"><a href="/jquery-handbook/ch05/#_5-3-dealing-with-form-element-values" class="sidebar-link">5.3 Dealing with form element values</a></li><li class="sidebar-sub-header"><a href="/jquery-handbook/ch05/#вопросы-и-задания" class="sidebar-link">Вопросы и задания</a></li></ul></li><li><a href="/jquery-handbook/ch10/" class="sidebar-link">10. Talk to the server with Ajax</a></li><li><a href="/jquery-handbook/ch11/" class="sidebar-link">11 Demo: an Ajax-powered contact form</a></li><li><a href="/jquery-handbook/ch13/" class="sidebar-link">13 Avoiding the callback hell with Deferred</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="_5-bringing-pages-to-life-with-jquery"><a href="#_5-bringing-pages-to-life-with-jquery" aria-hidden="true" class="header-anchor">#</a> 5 Bringing pages to life with jQuery</h1><ul><li>Manipulating element class names</li><li>Setting the content of DOM elements</li><li>Getting and setting form element values</li><li>Cloning DOM elements</li><li>Modifying the DOM tree by adding, moving, or replacing elements</li></ul><h2 id="_5-1-changing-element-styling"><a href="#_5-1-changing-element-styling" aria-hidden="true" class="header-anchor">#</a> 5.1 Changing element styling</h2><h3 id="_5-1-1-adding-and-removing-class-names"><a href="#_5-1-1-adding-and-removing-class-names" aria-hidden="true" class="header-anchor">#</a> 5.1.1 Adding and removing class names</h3><p><code>className</code> вообще отстой, работать с классами как со строкой неудобно.</p><p><a href="http://learn.javascript.ru/attributes-and-custom-properties#%D0%BA%D0%BB%D0%B0%D1%81%D1%81%D1%8B-%D0%B2-%D0%B2%D0%B8%D0%B4%D0%B5-%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D0%B0-classlist" target="_blank" rel="noopener noreferrer"><code>classList</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, IE10+ лучше, но позволяет работать только с одним элементом, а jQuery может работать с коллекцией. Чтобы заменить пачку классов, нужно делать что-то типа:</p><div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>forEach<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'my-class'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>addClass(String|Function)</code> — добавляет класс(-ы) ко всей коллекции.</li><li><code>removeClass()</code> — удаляет классы.</li></ul><p>В методы можно передавать функцию, которая сможет обработать каждый элемент коллекции.</p><p><code>toggleClass(String|Function, state)</code> — классы или ф-я возвращаюая классы в виде строки для переключения (каждый индивидуально). <code>state</code> говорит, добавлять или удалять классы.</p><p>См. кейс <a href="/jquery-handbook/ch05/5.1.1_toggleClass.html"><code>5.1.1_toggleClass.html</code></a>.</p><p><code>hasClass()</code> — проверить наличие класса. <code>true</code>, если все эелменты сета имеют класс.</p><h3 id="_5-1-2-getting-and-setting-styles"><a href="#_5-1-2-getting-and-setting-styles" aria-hidden="true" class="header-anchor">#</a> 5.1.2 Getting and setting styles</h3><p><code>css(name, value)</code> — назначить стили. Работает подобно <code>attr</code>. Так же можно передавать функцию в качестве <code>value</code>.</p><p>Шорткат для изменения значения: <code>$('.expandable').css('width', '+=20')</code>.</p><p>Вместо <code>name, value</code> можно передавать объект сразу с пачкой CSS-свойств:</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    margin<span class="token punctuation">:</span> <span class="token string">'1em'</span><span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> <span class="token string">'#1933FF'</span><span class="token punctuation">,</span>
    opacity<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> currentValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// (index % 10) - чтоб значение было от 0 до 1 даже если будет больше 10 элементов в сете</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>css(name)</code> как геттер принимает строку или массив CSS-свойств и возвращает стили. Вернет строку или объект.</p><h4 id="getting-and-setting-dimensions"><a href="#getting-and-setting-dimensions" aria-hidden="true" class="header-anchor">#</a> Getting and Setting Dimensions</h4><p><code>.width()</code> и <code>.height()</code>, в отличие от <code>.css('width|height')</code> вернут сразу число.</p><p>До jQuery 3 возвращались округленные значения (<code>parseInt</code>), в <code>3.0</code> округления нет, значение более точное.</p><p><code>el.style.width|height</code> сработают только для значений, установленных в атрибуте <code>style</code>. Для значений из CSS используют <a href="https://learn.javascript.ru/styles-and-classes" target="_blank" rel="noopener noreferrer"><code>getComputedStyle</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, который вернет строку с пикселями: <code>500px</code>.</p><p>См. примеры в <a href="/jquery-handbook/ch05/examples/css.html"><code>css.html</code></a>.</p><p><code>innerWidth()</code> — вернет ширину + паддинг не включая бордер.</p><p><code>outerWidth([includeMargin])</code> — вернет ширину + паддинг + бордер. Если передать <code>true</code>, то включит еще и маржин.</p><p>Имеются аналогичные методы для <code>height</code>.</p><p>См. <a href="/jquery-handbook/ch05/examples/5.1.2_width_height.html">примеры</a>.</p><h4 id="positions-and-scrolling"><a href="#positions-and-scrolling" aria-hidden="true" class="header-anchor">#</a> Positions and Scrolling</h4><p><code>offset()</code> — геттер/сеттер. Вернет/установит позицию относительно документа. Возвращает/принимает объект вида <code>{top: y, left: x}</code> или ф-ю, которая такой объект вернет. Если в сете более одного элемента, то сеттер установит координаты для каждого. А геттер возьмет только координаты первого.</p><p><code>position()</code> — координаты относительно родителя с позиционированием (<code>absolute|relative|fixed</code>). Только геттер.</p><p>См. <a href="/jquery-handbook/ch05/examples/5.1.2_offset.html">примеры</a>.</p><p><code>scrollLeft([value])</code>, <code>scrollTop([value])</code> — геттер/сеттер скролла. Работает на элементах со скроллом.</p><h2 id="_5-2-setting-element-content"><a href="#_5-2-setting-element-content" aria-hidden="true" class="header-anchor">#</a> 5.2 Setting element content</h2><h3 id="_5-2-1-replacing-html-or-text-content"><a href="#_5-2-1-replacing-html-or-text-content" aria-hidden="true" class="header-anchor">#</a> 5.2.1 Replacing HTML or text content</h3><p><code>html()</code> — геттер/сеттер содержимого элемента в HTML. Геттер вернет содержимое первого элемента в сете, сеттер установит новый контент для всех.</p><p><code>text()</code> — вернет текстовое представление содержимого элемента. HTML-символы экранируется.</p><p>В оба метода можно передавать ф-ю, которая будет вызвана для каждого элемента в сете и получит его в <code>this</code>.</p><h3 id="_5-2-2-moving-elements"><a href="#_5-2-2-moving-elements" aria-hidden="true" class="header-anchor">#</a> 5.2.2 Moving elements</h3><p><code>.append(content, [content, ...])</code> — добавить контент в элемент. Или перенести элемент, если он передается в функцию. Можно передавать строку HTML, jQuery или DOM-объект. Ну и ф-ю.</p><p><code>.prepend()</code> — как <code>append</code>, только добавляет в начало содержимого.</p><p><code>before()</code>, <code>after()</code> — добавить контент на тот же уровень до/после элемента, на котором вызвали метод.</p><p>Аналогичные методы, которые можно вызывать на самом контенте: <code>appendTo</code>, <code>prependTo</code>, <code>insertBefore</code>, <code>insertAfter</code>. Иногда удобнее использовать их.</p><p>См. визуализацию в <a href="https://github.com/AurelioDeRosa/jquery-in-action/blob/master/chapter-5/lab.move.and.copy.html" target="_blank" rel="noopener noreferrer"><code>jquery-in-action/chapter-5/lab.move.and.copy.html</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h3 id="_5-2-3-wrapping-and-unwrapping-elements"><a href="#_5-2-3-wrapping-and-unwrapping-elements" aria-hidden="true" class="header-anchor">#</a> 5.2.3 Wrapping and unwrapping elements</h3><p><code>wrap(wrapper)</code> — обернуть элементы в сете. Может быть строкой с открывающим тегом (закрывающий не обязательно), DOM/jQuery-элементом, ф-ей. Можно указать существующий jQuery-элемент и он склонируется и обернет контент.</p><p><code>wrapAll(wrapper)</code> в отличие от <code>wrap</code> обернет всю коллекцию один раз как единое целое.</p><p><code>wrapInner(wrapper)</code> — обернуть контент элемента, но не сам элемент.</p><p><code>unwrap([selector])</code> — убирает роительский элемент у коллекции. <code>[selector]</code> добавился в jQuery 3: если такой родитель найдется, то метод сработает. Иначе нет.</p><p>См. <code>examples/5.2.3_wrapper.html</code>.</p><h3 id="_5-2-4-removing-elements"><a href="#_5-2-4-removing-elements" aria-hidden="true" class="header-anchor">#</a> 5.2.4 Removing elements</h3><p><code>remove([selector])</code> — удалить все элементы вместе с их данными и обработчиками. Вернет сет, который так же можно будет куда-то вставить.</p><p><code>detach([selector])</code> — удалить из DOM, но сохранить обработчики и данные. Предпочтительный вариант, когда нужно вернуть элемент на страницу. Частый кейс — убрать элемент из DOM, сделать с ним что-то, вернуть обратно. Это быстрее, чем сразу в DOM все делать и <code>detach</code> позволит сохранить данные и обработчики.</p><p>Пример <code>detach</code> vs <code>remove</code>!</p><p><code>empty()</code> — удалить контент элемента.</p><h3 id="_5-2-5-cloning-elements"><a href="#_5-2-5-cloning-elements" aria-hidden="true" class="header-anchor">#</a> 5.2.5 Cloning elements</h3><p><code>clone()</code> — копирует элементы с детьми. Если параметром передается <code>true</code>, то элементы копируются с обработчиками и данными. Если второе <code>true</code> (если не указано, то будет такое же, как первое), то и все дети копируются с данными и обработчиками.</p><h3 id="_5-2-6-replacing-elements"><a href="#_5-2-6-replacing-elements" aria-hidden="true" class="header-anchor">#</a> 5.2.6 Replacing elements</h3><p><code>replaceWith(content)</code></p><p><code>replaceAll()</code> — отражение <code>replaceWith</code></p><h2 id="_5-3-dealing-with-form-element-values"><a href="#_5-3-dealing-with-form-element-values" aria-hidden="true" class="header-anchor">#</a> 5.3 Dealing with form element values</h2><p><code>val()</code> — геттер/сеттер значений элементов формы.</p><p><code>serialize()</code></p><p><code>serializeArray()</code></p><h2 id="вопросы-и-задания"><a href="#вопросы-и-задания" aria-hidden="true" class="header-anchor">#</a> Вопросы и задания</h2><h3 id="_50-оттенков-серого"><a href="#_50-оттенков-серого" aria-hidden="true" class="header-anchor">#</a> 50 оттенков серого</h3><p>На <a href="/jquery-handbook/ch05/tasks/50_shades_of_grey.html">странице</a> имеется 50 блоков, все розовые. Используя метод <code>.css()</code> перекрасьте эти блоки так, чтобы получилось 50 оттенков серого:</p><img src="tasks/50_shades_view.png" width="400"><h3 id="шарик-оттаnкивающийся-от-стен"><a href="#шарик-оттаnкивающийся-от-стен" aria-hidden="true" class="header-anchor">#</a> Шарик, отталкивающийся от стен</h3><p>Используя полученные знания реализуйте шарик как на <a href="https://youtu.be/M0YAKFMTxKw" target="_blank" rel="noopener noreferrer">примере<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Шар должен перемещаться по всему документу, отталкиваясь от краев как от стен.</p><p>Для выполнения задачи понадобится функция <a href="http://learn.javascript.ru/settimeout-setinterval#setinterval" target="_blank" rel="noopener noreferrer"><code>setInterval</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h3 id="кнопка-«наверх»"><a href="#кнопка-«наверх»" aria-hidden="true" class="header-anchor">#</a> Кнопка «Наверх»</h3><p>Реализуйте кнопку «Наверх», которая появляется после того, как пользователь проскроллил хотя бы один экран.</p></div><div class="content edit-link"><!----><!----></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/jquery-handbook/ch04/" class="prev">
          4. Working with properties, attributes, and data
        </a></span><span class="next"><a href="/jquery-handbook/ch10/">
          10. Talk to the server with Ajax
        </a> →
      </span></p></div></div></div></div>
    <script src="/jquery-handbook/assets/js/4.dca42521.js" defer></script><script src="/jquery-handbook/assets/js/app.c2cea729.js" defer></script>
  </body>
</html>
